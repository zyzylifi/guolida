<% var obj = {title : "订单",menuColor1:"color:red" }%>
{{include "../header.html"}}
{{include "../pageTitle.html" obj}}
<!-- <div style="background-color:rgb(246, 69, 69)" class="page-title text-center flex-column">
    <span style="color: white;font-size:15px">我的订单</span>
</div> -->


<style type="text/css">
     .back {
        position: absolute;
        left: 10px;
        top: 50%;
        transform: translateY(-50%);
    }
    .forward{
        position:absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 12px;
        color: black;
    }
</style>



<div class="order-list">
    <!-- 未登录的页面 -->
    {{if userInfo==undefined && orderList==null}}
    <a href="/user_info/login">未登录，请先登录！</a>
    {{/if}}

    <!-- 登录，没有订单 -->
    {{if userInfo!=undefined}}
    <a href="/user_info/login">您还没有订单！</a>
    {{/if}}

    <!-- 已经登录，有订单 -->
    {{if orderList!=null}}
    <!-- 登录之后的数据 -->
    {{each orderList item index}}
    <div class="order-item">
        <div class="order-title">
            <img class=" img-responsive " src="{{'../..' + item.s_photo}}" alt="">
            <span style="font-size:13px;color:rgb(75, 74, 74)">{{item.s_name}}</span>
            <span style="font-size:12px;color:rgba(128, 128, 128, 0.787)" class=" glyphicon glyphicon-menu-right"></span>
        </div>
        <div class="order-things">
            <div style="font-size:12px;color:rgb(110, 108, 108)" class=" flex-row-between">
                <span >{{item.f_name}}{{item.o_nm}}件商品</span>
                <span>￥{{item.o_price}}</span>
            </div>
            <div style="color:rgba(128, 128, 128, 0.849);margin-top:8px" class="small flex-row-between">
                <span>{{item.o_date.toLocaleString()}}</span>
                <%if(item.o_flag == 1){%>
                <span>已完成</span>
                <%}else if(item.o_flag == 0){%>
                <span>订单未处理</span> 
                <%}%>
            </div>
        </div>
        <div class="order-menu">
            <div id="moreOrder" class=" text-center col-xs-6">
                再来一单
            </div>
            <div id="appraise" class=" text-center col-xs-6">
                去评价
            </div>
        </div>
    </div>
    {{/each}}
    {{/if}}
</div>


<style type="text/css">
    .order-list{
        position: absolute;
        top: 50px;
        left: 0px;
        bottom:50px;
        width: 100%;
        background-color:rgb(243, 241, 241);
        padding-top: 5px;
    }
    .order-list>div+div{
        margin-top:45px;
    }
    .order-item{
        background-color: #fff;
        box-sizing: border-box;
        margin:2px;
    }
    .order-title{
        width: 100%;
        height: 48px;
        padding: 10px;
        box-sizing: border-box;
        border-bottom:1px dotted rgba(175, 173, 173, 0.883);
    }
    .order-title>img{
        width: auto;
        height: 100%;
        display: inline-block;
    }
    .order-things{
        padding:15px;
    }
    .order-menu{
        border-top:1px solid rgba(197, 197, 197, 0.52);
        border-bottom:1px solid rgb(156, 156, 156);
    }
    .order-menu>div{
        display: inline-block;
        height: 33px;
        line-height: 33px;
        background-color: #fff;
        color : rgb(131, 131, 131);
    }
    .order-menu>div+div{
        border-left:1px solid rgb(197, 197, 197);
    }
    .text-center.col-xs-6{
        border-bottom: 1px solid rgb(197, 197, 197);
    }
</style>

<script type="text/javascript">
    $(function(){
        $(".text-center.col-xs-6").each(function(index,item){
            $(this).hover(function(){
                $(this).css({
                    "background-color" : "rgb(223, 101, 92)",
                    "color" : "white"
                });
            },function(){
                $(this).css({
                    "background-color" : "white",
                    "color" : "rgb(131, 131, 131)"
                });
            })
        });

        $(".order-list").click(function(event){
            event = window.event || event;
            if(event.target.id == "moreOrder" || event.target.id == "appraise"){
                layer.msg("功能正在开发中...");
                return false;
            }
        })
    });
</script>

{{include "../footerMenu.html" obj}}

{{include "../footer.html"}}